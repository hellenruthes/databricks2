bundle:
  name: weekly-report

artifacts:
  weekly_wheel:
    type: whl
    path: .

targets:
  dev:
    mode: development
    default: true
    workspace:
      host: https://adb-7405607729396189.9.azuredatabricks.net

resources:
  jobs:
    weekly_report_job:
      name: weekly_report_job
      tasks:
        - task_key: weekly
          existing_cluster_id: 0105-192402-luuwxoyl

          libraries:
            - whl: ${artifacts.weekly_wheel}

          python_wheel_task:
            package_name: "weekly-report"
            entry_point: "weekly-report"
            named_parameters:
              week_of: "2026-01-05"
              topics: "Resources Weekly Used - created table and dashboard"
              model: "gpt-4o-mini"
              data: ""
              secret_scope: "hellendev2"
              openai_key_name: "openaiapi"
